# Experimental Record——实验记录

## 20190401

3000张训练集 1000张验证集 1000张测试集

归一化参数：[0.396, 0.434, 0.435], [0.055, 0.053, 0.054]

| model | 全图缩放 | 全图缩放（加入gamma矫正） | 随机裁剪 | 随机裁剪（加入gamma矫正） | 模型融合(五张平均) | 模型融合(五张平均，加入gamma矫正) | 模型融合(特征图融合) | 模型融合(特征图融合，加入gamma矫正) | 模型融合（只在测试融合，五张平均） | 模型融合（只在测试融合，全图平均） |
| :----- | ------ | ------ | ------ | ------ | :----: | ------ | ------ | :----: | ------ | ------ |
| VGG13_bn | 95.38% ||||||||||
| VGG16_bn | 95.98% | 28.44% | 70.42% |  | 87.52% | 88.79% | 75.43% |  | 2.60% | 3.26% |
| VGG19_bn | 96.58% ||||||||||
| ResNet50 | 95.23% ||61.76%||80.77%||63.66%||||
| ResNet101 | 94.46% ||||||||||
| ResNet152 | 94.09% ||||||||||
| DenseNet121 | 93.12% ||71.53%||78.09%||69.92%||||

---

| VGG16模型分类准确率 |  | 不加gamma校正 | 加入gamma校正 |
| ------ | ------ | ------ | ------ |
| 全图缩放 |  | 95.98% |95.80%|
| 随机裁剪 | 随机裁剪 | 70.42% | 2.21% |
|  | 结果融合（只在测试融合，五张平均） | 2.60% | 2.60% |
|  | 结果融合（只在测试融合，全图平均） | 3.26% | 3.26% |
| 模型融合 model1 | 从大图裁剪五张小图，fc层平均融合 | 87.52% | 88.79% |
| 模型融合 model2 | 从大图裁剪五张小图，特征图融合 | 75.43% | 79.33% |

下一步考虑模型融合：
![](https://i.loli.net/2019/04/01/5ca1a42a046c7.jpg)
在这之前，要解决两个问题：

1. 证明1920*1080,batch_size=1,用一张显卡，vgg13_bn跑不了（编写代码，验证内存会溢出）
   
    @date 20190401  
    Answer:
    `http://202.204.62.145:8888/notebooks/ZhouJiacheng/paste_video_classification/second_experiment/ash_sand_1_16_photo_classification_vgg13_bn_1920_1080.ipynb#`
    ![](https://i.loli.net/2019/04/01/5ca22be07175c.jpg)
    结果证明，的确会内存溢出 

2. 证明测试集随机裁一块224*224，可能会裁到螺旋桨，导致正确率降低（用随机裁的方式，编写代码，验证正确率低的结果）

    @date 20190402
    用Resize(224)训练和验证，用RandomCrop(224)测试，正确率是4.17%
    
    @date 20190403
    均用Resize(224)训练、验证和测试
    学习率每隔2个epoch，乘以0.1
    ![](https://i.loli.net/2019/04/03/5ca453440c149.jpg)
    ![](https://i.loli.net/2019/04/03/5ca4536183481.jpg)
    测试集正确率56.36%

## 20190511
gamma变换测试：全图缩放正确率48.44% ; 随机裁剪+模型融合average正确率16.44%

## 20190712 和马师兄、姚老师讨论

1. 光照分级
2. 在pascal voc数据集中进行训练、验证和测试

## 20190717 材料基因组小组会

1. model3和model4实验再跑一遍
1. model4使用model3的参数试一试
1. 如果model4的结果比model3好，则可以开始写专利了
1. model4的两个网络调节比例，这是可以算出来的，不要平均。五张小图可以平均，但高分辨率和低分辨率的结果不能平均
1. 每次跑完一个epoch，作一次前向传播，包括训练集和验证集，看能不能解决训练集正确率小于验证集正确率的问题，可以先解决这个问题
1. PASCAL VOC数据集也需要解决训练集小于验证集的问题，另外解决加不加Gamma矫正正确率一模一样的问题
1. 继续去实现EM算法


little数据集
600张训练集 200张验证集 200张测试集

## 各个模型参数量
AlexNet 61100840 61M
VGG13 128967236 129M
VGG16 134276932 134M
VGG19 139586628 140M
ResNet50 23516228 24M
ResNet101 42508356 43M
ResNet152 58152004 58M
DenseNet121 6957956 7M
DenseNet161 26480836 28M
DenseNet201 20013928 20M

AlexNet 61M
VGG13 129M
VGG16 134M
VGG19 140M
ResNet50 24M
ResNet101 43M
ResNet152 58M
DenseNet121 7M
DenseNet161 28M
DenseNet201 20M


